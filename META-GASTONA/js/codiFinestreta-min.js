/*
@project : https://github.com/wakeupthecat/gastona
@file    : codiFinestreta-min.js
@version : 202111

Copyright (C) 2015-2021 Alejandro Xalabarder Aulet

@license : GNU General Public License (GPL) version 3 + commercial license through OpenSoftwareCongoLicenseV0.1

This program is distributed in the hope that it will be useful, but WITHOUT ANY
WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE. See the GNU General Public License for more details.
*/
function codiFinestreta(ab,c,u,F){var j=["break,continue,do,else,for,if,return,while"];var z=[j,"auto,case,char,const,default,double,enum,extern,float,goto,inline,int,long,register,restrict,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"];var p=[z,"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"];var k=[p,"alignas,alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,delegate,dynamic_cast,explicit,export,friend,generic,late_check,mutable,namespace,noexcept,noreturn,nullptr,property,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"];var B=[p,"abstract,assert,boolean,byte,extends,finally,final,implements,import,instanceof,interface,null,native,package,strictfp,super,synchronized,throws,transient,String"];var Y=[p,"abstract,add,alias,as,ascending,async,await,base,bool,by,byte,checked,decimal,delegate,descending,dynamic,event,finally,fixed,foreach,from,get,global,group,implicit,in,interface,internal,into,is,join,let,lock,null,object,out,override,orderby,params,partial,readonly,ref,remove,sbyte,sealed,select,set,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,value,var,virtual,where,yield"];var A=[p,"abstract,async,await,constructor,debugger,enum,eval,export,function,get,implements,instanceof,interface,let,null,set,undefined,var,with,yield,Infinity,NaN"];var w="caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END";var M=[j,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"];var i=[j,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"];var L=[j,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"];var D=[k,Y,B,A,w,M,i,L];var l="http://www.w3.org/2000/svg";var I="#606060";var W=D.join(",").split(",");var x=400;var U=50;var e=U+Math.round(a*4/3);var a=123/14;var ac=20;var N;var s={};var m={};var g=1;var O;var h="monospace";var S={mark:"#937979",normal:"#FFFFFF",key:"#e0b370",comment:"#ea8883",literal:"#b7b3b6",punkt:"#FFFFAA",num:"#f78585",linenum:"#89b1b2",back:"#2d1d1d"};var T={consolas:["Consolas",8.79261302947998,18.18181800842285],couriernew:["Courier New",9.59375,18],monospace:["Monospace",7.140625,15]};var q={clar:"e8e8e83636360f4db7d14306917777f0b4230f4db7f4555ab2a6a6",dunes:"f5f3d80a1007a4a400679227d07853d5db62a82b73da3d74d3be47",sang:"2d1d1dFFFFFFe0b370b7b3b6ea8883937979FFFFAAf7858589b1b2",fusta:"333333FFFFFFDCC275A2FCA2888888575757FFFFAAD36363719293",cafeto:"373b41dadcdbf0c674bfe9a0eb8f63717935f2f73cb5d7d2888f97",dark:"002b36FFFFFFe0b370b7b3b6d0e1c9937979FFFFAA9ddfddd0e1c9",dark2:"002b36e9e9e9ecee9568d7cec1c1c1268fe6FFFFAAed9cc70dcac0",vscode:"1e1e1ec586b6dcdcaace91786a9955575757ffffff4ec9b0719293",tronja:"0d0d0cfb6413f5d11996360d868a85575757ffffff3a8cd9719293",canyer:"000000FFFFFFd3884366b042aeaeae575757FFFFAA3387cc719293",ampolla:"121c1ae1dfad4ec9b0c06039367f24575757ffffffd897b4719293"};var G=ab;var b=G?G.length:0;var P=0;var t;R(G);return{attachTo:o,dettachFrom:n,loadText:R,gotoLine:X,insertChar:J,changeFont:d,setFont:d,changeTheme:E,setTheme:E,getThemeColor:K,getSvgPane:f,renderFinestreta:Q,getPosLastClick:aa};function R(ae){G=ae;b=ae?ae.length:0;P=0;var af=F;for(var ad=0;ad<ae.length;ad++){if(ae[ad].length>P){P=ae[ad].length}m[ad]=af;if(af){if(ae[ad].match(/^\s*\//)){af=false}}else{if(ae[ad].match(/^\s\/*/)){af=true}}}E("")}function H(){N=null}function y(){if(N){return}a=T[h][1];ac=T[h][2];U=Math.round(5*a);e=U+Math.round(a*4/3);N=document.createElementNS(l,"svg");var ae=e+Math.round(a*(3+P));var ad=Math.round(ac*(1+b));N.setAttribute("width",ae);N.setAttribute("height",ad);N.setAttribute("style","background-color:"+S.back);N.setAttribute("id","codeLightPro");s={};C()}function K(ad){return S[ad]||I}function f(){y();return N}function o(ad){n(t);ad.finestreta=this;t=ad;t.style.overflow="scroll";C();t.addEventListener("scroll",Z);t.addEventListener("click",v);window.addEventListener("resize",Z)}function n(ad){if(!ad){return}ad.finestreta=null;ad.removeEventListener("scroll",Z);ad.removeEventListener("click",v);window.removeEventListener("resize",Z);while(ad.hasChildNodes()){ad.removeChild(ad.firstChild)}ad=null}function C(){if(t){t.style["font-family"]=T[h][0];t.style["font-weight"]="normal";t.style["background-color"]=K("back");while(t.hasChildNodes()){t.removeChild(t.firstChild)}t.appendChild(f())}}function X(ad){g=ad;var ae=t.clientHeight/ac;t.scrollTop=Math.max(0,(g-c-ae/2)*ac);Z()}function J(ae,af,ad){G[af]=G[af].substr(0,ad)+ae+G[af].substr(0,ad+1);s={};X(af)}function aa(){if(!t||!O){return{row:0,col:0}}return{row:c+Math.round(O.offsetY/ac),col:Math.round(O.offsetX-e/a)}}function Z(){if(!t){return}y();Q(t.clientWidth,t.clientHeight,t.scrollTop)}function v(ad){O=ad}function E(ad){var ae=ad.length>=48?ad:(q[ad]||q.ampolla);ae=ae.replace(/\s+/g,"");S.back="#"+ae.substr(0,6);S.normal="#"+ae.substr(6,6);S.key="#"+ae.substr(12,6);S.literal="#"+ae.substr(18,6);S.comment="#"+ae.substr(24,6);S.mark="#"+ae.substr(30,6);S.punkt="#"+ae.substr(36,6);S.num="#"+ae.substr(42,6);S.linenum="#"+ae.substr(48,6);H();Z()}function d(ad){var ae=ad.replace(/\s/g,"").toLowerCase();if(T[ae]){h=ae;H();Z()}else{console.error("codeFinestra: cannot set font to ["+ad+"]")}}function Q(ai,ah,af){var ag=Math.round(af/ac);var ad=Math.min(4+ag+Math.round(ah/ac),G.length);for(var ae=ag-2;ae<ad;ae++){if(ae>=0&&!s[ae]){N.appendChild(r(G[ae],u,c+ae,ac*(ae+1),a,ac,S));s[ae]="y"}}}function V(ae,af){var ah=af;var ag=null;return{setData:function(ai){ah=ai},getData:function(){return ah},addData:function(ai){ah+=ai},nextMatch:ad,getLastMatch:function(){return ag}};function ad(){if(!ah||ah.length===0){return null}var ak=ah.length;var aj="";for(var al in ae){if(ae.hasOwnProperty(al)){ae[al].match=ae[al].reg.exec(ah);if(ae[al].match&&ae[al].match.index<ak){ak=ae[al].match.index;aj=al}}}if(!aj){return null}var ai=ae[aj].match;if(ai&&aj){ag={agent:aj,prevStr:ah.substr(0,ai.index),matchStr:ai[0]};ah=ah.substr(ai.index+ai[0].length);return ag}}}function r(ai,ak,af,ag,ao,an,ah){var ad;var aq;ad=document.createElementNS(l,"g");aq=document.createElementNS(l,"text");aq.setAttribute("x",e);aq.setAttribute("y",ag);aq.setAttribute("style","white-space: pre");var am=V({number:{reg:/[-+]?\.[0-9]+|[-+]?[0-9]+/},word:{reg:/\w+/},space:{reg:/\s+/}});return aj(ai);function ap(ar,au){if(!au){return}if(!ar||au.match(/^\s+$/)){aq.appendChild(document.createTextNode(au));return}var at=document.createElementNS(l,"tspan");at.textContent=au;at.setAttribute("fill",ah[ar]||I);aq.appendChild(at)}function ae(ax){var aw=ak;var au;var ar=document.createElementNS(l,"text");ar.setAttribute("x",U);ar.setAttribute("y",ag);ar.textContent=af+"";ar.setAttribute("style","fill: "+(ah.linenum||I)+"; text-anchor: end");ad.appendChild(ar);while((au=aw.exec(ax))!==null){if(au.index===aw.lastIndex){aw.lastIndex++}var at=Math.round(e+au.index*ao);var av=Math.round(ao*au[0].length);ar=document.createElementNS(l,"rect");ar.setAttribute("x",(at-2));ar.setAttribute("y",Math.round(ag-3*an/4));ar.setAttribute("fill",(ah.mark||I));ar.setAttribute("width",av+4);ar.setAttribute("height",an);ad.appendChild(ar)}}function aj(at){ae(at);var ar=at&&(at.match(/^\s+#/)||at.match(/^\s+\*\s/));if(ar){ap("comment",at)}else{if(at.length>x){al(at.substr(0,x));ap("normal",at.substr(x))}else{al(at)}}ad.appendChild(aq);return ad}function al(az){var ax=/\/\/|\/\*|<!/;var aw=/[\"']/;var ay=ax.exec(az);var au=aw.exec(az);if(ay&&(!au||au.index>ay.index)){return al(az.substr(0,ay.index))+ap("comment",az.substr(ay.index))}if(au){var at=au[0].charAt(0);var av=au.index+1;while(av<az.length){while(av<az.length&&az.charAt(av)!==at){av++}if(av>=az.length){break}if(az.charAt(av-1)==="\\"){av++}else{if(av+1<az.length&&az.charAt(av+1)===at){av+=2}else{break}}}return al(az.substr(0,au.index))+ap("literal",az.substr(au.index,1+av-au.index))+al(az.substr(av+1))}am.setData(az);var ar;while((ar=am.nextMatch())!==null){ap("punkt",ar.prevStr);if(ar.agent==="number"){ap("num",ar.matchStr)}else{if(ar.agent==="space"){ap(null,ar.matchStr)}else{if(ar.agent==="word"){if(W.indexOf(ar.matchStr)!==-1){ap("key",ar.matchStr)}else{ap("normal",ar.matchStr)}}}}}ap("punkt",am.getData())}}};